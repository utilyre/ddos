#!/bin/sh

mkdir --parents -- "$TRADIFF_RUNTIME"

for network in "$@"; do
	networks="$networks:$network"
	current="$(($current + $(cat -- "$network")))"
done

export TRADIFF_TMP="$TRADIFF_RUNTIME/$(printf -- "%s\n" "$networks" | base64 --wrap="0")"
previous="$(cat -- "$TRADIFF_TMP" || printf -- "0\n")"

printf -- "%d\n" "$current" > "$TRADIFF_TMP"
numfmt --to="iec-i" --suffix="B" -- "$(($current - $previous))"
