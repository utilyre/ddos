#!/bin/sh

padding="$(($(xrdb -get "bspwm.padding") + $(xrdb -get "bspwm.gap")))"
width="$(($(xrandr | awk --field-separator="[ x]" -- "(\$0 ~ /*/) { print \$4 }") - 2 * $padding))"
height="$(xrdb -get "flexblocks.height")"

flexblocks | lemonbar \
	-g "${width}x${height}+${padding}+${padding}" \
	-f "$(xrdb -get "flexblocks.font")" \
	-u "$(xrdb -get "flexblocks.underline")" \
	-B "$(xrdb -get "flexblocks.background")" \
	-F "$(xrdb -get "flexblocks.foreground")" | sh
